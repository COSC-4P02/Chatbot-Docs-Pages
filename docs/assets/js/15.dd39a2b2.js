(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{413:function(a,t,e){"use strict";e.r(t);var s=e(56),r=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"deploy-on-server"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deploy-on-server"}},[a._v("#")]),a._v(" Deploy on Server")]),a._v(" "),e("h2",{attrs:{id:"prerequisites"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[a._v("#")]),a._v(" Prerequisites")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Node.js"),e("OutboundLink")],1)]),a._v(" "),e("li",[e("a",{attrs:{href:"https://yarnpkg.com/en/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Yarn"),e("OutboundLink")],1)])]),a._v(" "),e("p",[a._v("or")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Docker"),e("OutboundLink")],1)])]),a._v(" "),e("h1",{attrs:{id:"frontend"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frontend"}},[a._v("#")]),a._v(" Frontend")]),a._v(" "),e("br"),a._v(" "),e("code-group",[e("code-block",{attrs:{title:"YARN"}},[e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" Frontend\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build\n")])])])])],1),a._v(" "),e("p",[a._v("Upload "),e("code",[a._v("dist")]),a._v(" folder to server or deploy on GitHub Pages")]),a._v(" "),e("h1",{attrs:{id:"backend"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#backend"}},[a._v("#")]),a._v(" Backend")]),a._v(" "),e("h2",{attrs:{id:"choice-1-run-natively"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#choice-1-run-natively"}},[a._v("#")]),a._v(" Choice 1: Run Natively")]),a._v(" "),e("h3",{attrs:{id:"run-by-npm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#run-by-npm"}},[a._v("#")]),a._v(" Run by NPM")]),a._v(" "),e("br"),a._v(" "),e("code-group",[e("code-block",{attrs:{title:"NPM"}},[e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" Backend\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run serve\n")])])])]),a._v(" "),e("code-block",{attrs:{title:"YARN"}},[e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" Backend\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" serve\n")])])])])],1),a._v(" "),e("h2",{attrs:{id:"choice-2-build-and-run-on-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#choice-2-build-and-run-on-docker"}},[a._v("#")]),a._v(" Choice 2: Build and Run on Docker")]),a._v(" "),e("h3",{attrs:{id:"build-docker-image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#build-docker-image"}},[a._v("#")]),a._v(" Build Docker Image")]),a._v(" "),e("blockquote",[e("p",[a._v("Build with Default Config")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" -t krunk/chatbot-ai-backend\n")])])]),e("blockquote",[e("p",[a._v("Build with Multiple Architectures")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" buildx create --name krunkbuilder\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" buildx "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" buildx use krunkbuilder\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" buildx build "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" -t krunk/chatbot-ai-backend --platform"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("linux/arm64,linux/amd64 --push\n")])])]),e("h3",{attrs:{id:"run-docker-container"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#run-docker-container"}},[a._v("#")]),a._v(" Run Docker Container")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://hub.docker.com/r/krunk/chatbot-ai-backend",target:"_blank",rel:"noopener noreferrer"}},[a._v("krunk/chatbot-ai-backend"),e("OutboundLink")],1)]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull krunk/chatbot-ai-backend\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -d --name chatbot-ai-backend -p "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("8001")]),a._v(":8001 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v(":3000 -v "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("/chatbot-ai-backend/data:/usr/src/app/data krunk/chatbot-ai-backend\n")])])]),e("h2",{attrs:{id:"choice-3-run-on-docker-with-azure-vm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#choice-3-run-on-docker-with-azure-vm"}},[a._v("#")]),a._v(" Choice 3: Run on Docker with Azure VM")]),a._v(" "),e("h3",{attrs:{id:"system-requirements"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#system-requirements"}},[a._v("#")]),a._v(" System Requirements:")]),a._v(" "),e("ul",[e("li",[a._v("CPU: 1 vcpu is minimum, 2 vcpu is recommended")]),a._v(" "),e("li",[a._v("Memory: 512M or more is minimum, 1G or more is recommended")]),a._v(" "),e("li",[a._v("Hard disk: More than 100M available hard disk space")]),a._v(" "),e("li",[a._v("System: CentOS 7.1+")])]),a._v(" "),e("p",[a._v("When creating the VM, allow port "),e("code",[a._v("80")]),a._v(", "),e("code",[a._v("443")]),a._v(" and "),e("code",[a._v("22")])]),a._v(" "),e("p",[a._v("go to "),e("code",[a._v("Network security groups")]),a._v(" on Azure portal, enable port "),e("code",[a._v("3000")]),a._v(" and "),e("code",[a._v("8001")])]),a._v(" "),e("p",[a._v("ssh into the VM")]),a._v(" "),e("p",[a._v("install "),e("code",[a._v("aapanel")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" -O install.sh http://www.aapanel.com/script/install_6.0_en.sh "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" install.sh forum\n")])])]),e("p",[a._v("login into panel "),e("code",[a._v("http://ip:8888/entrycode")])]),a._v(" "),e("p",[a._v("Under "),e("code",[a._v("App Store")]),a._v(" tab on the left sidebar, download and install "),e("code",[a._v("Nginx")]),a._v(" "),e("code",[a._v("Docker Manager")])]),a._v(" "),e("p",[a._v("Open "),e("code",[a._v("Terminal")]),a._v(" tab on the left sidebar and run the following commands")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /www/wwwroot/\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -d --name chatbot-ai-backend -p "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("8001")]),a._v(":8001 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v(":3000 -v "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("pwd")]),e("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("/chatbot-ai-backend/data:/usr/src/app/data krunk/chatbot-ai-backend\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -d --name watchtower -v /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower -i "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("60")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" iptables -I INPUT -p tcp -m tcp --dport "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("443")]),a._v(" -j ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" iptables -I INPUT -p tcp -m tcp --dport "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v(" -j ACCEPT\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" iptables -I INPUT -p tcp -m tcp --dport "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("8001")]),a._v(" -j ACCEPT\n")])])]),e("p",[a._v("Under "),e("code",[a._v("Website")]),a._v(" tab on the left sidebar")]),a._v(" "),e("p",[a._v("Create two new website "),e("code",[a._v("api.chatbot-ai.ga")]),a._v(" "),e("code",[a._v("ws.chatbot-ai.ga")]),a._v(" and request SSL from letsencrypt")]),a._v(" "),e("p",[a._v("Click on "),e("code",[a._v("api.chatbot-ai.ga")]),a._v(" and select "),e("code",[a._v("Reverse proxy")]),a._v(" tab on the left sidebar and "),e("code",[a._v("Add reverse proxy")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("Proxy name: api.chatbot-ai.ga\nTarget URL: http://127.0.0.1:3000\nSent Domain: $host\n")])])]),e("p",[a._v("Click "),e("code",[a._v("Submit")])]),a._v(" "),e("p",[a._v("Now, try to visit "),e("code",[a._v("api.chatbot-ai.ga")]),a._v(", if it is showing "),e("code",[a._v("404 Not Found")]),a._v(", then the server is ready to use.")])],1)}),[],!1,null,null,null);t.default=r.exports}}]);